<html>
<head>
<script>
	backgroundPage = chrome.extension.getBackgroundPage();
	
	function init() {
		backgroundPage.debug.db.transaction(function(tx) {
			tx.executeSql('SELECT * FROM event_log', [], renderFunc, backgroundPage.debug.onError);
		});
  }
  
  function renderFunc(tx, rs) {
		var rowOutput = "";
		for (var i=0; i < rs.rows.length; i++) {
			rowOutput += renderLog(rs.rows.item(i));
		}
		var logsElement = document.getElementById('logs');
		logsElement.innerHTML = rowOutput;
	}
	
	function renderLog(row) {
	  var timeStamp = new Date(row.time_stamp);
		return row.event_type + ', ' + row.window_id + ', ' + row.tab_id + ', ' + timeStamp.getTime() + '\n';
	}
</script>
</head>
<body onload="init();">
CSV Format: "event_type, window_id, tab_id, timestamp (ms since epoch)"<br>
<textarea cols="80" rows="40" id="logs">No events logged yet.</textarea>
</body>
</html>